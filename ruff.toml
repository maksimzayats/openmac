line-length = 100

[lint]
preview = true
select = ["ALL"]
unfixable = ["T201"]
ignore = [
    "CPY001",

    # Documentation (pydocstyle)
    "D101",
    "D100", # Missing docstring in public module
    "D103", # Missing docstring in public function
    "D104", # Missing docstring in public package
    "D105", # Missing docstring in magic method
    "D107", # Missing docstring in __init__
    "D203", # Conflicts with D211 (no blank line before class)
    "D213", # Conflicts with D212 (multi-line summary at first line)

    # Type annotations (flake8-annotations)
    "ANN401", # Dynamically typed expressions (Any) disallowed

    # Line length (pycodestyle)
    "E501", # Line too long (handled by formatter)

    # Type checking imports (flake8-type-checking)
    "TC001", # Move first-party import into TYPE_CHECKING block
    "TC002", # Move third-party import into TYPE_CHECKING block
    "TC003", # Move stdlib import into TYPE_CHECKING block

    # TODO
    "TD003",
    "FIX002",

    "TRY002",
    "TRY003",
    "EM101",
    "EM102",
    "EM103",
    "B903",
]

[lint.per-file-ignores]
"__init__.py" = [
    "F401", # Module imported but unused
]
"tests/**" = [
    # Pytest assertions and style
    "S101", # Use of assert detected
    "PT003", # pytest.fixture with scope="function" is default
    "PT012", # pytest.raises with multiple statements

    # Unused arguments/variables
    "ARG001", # Unused function argument
    "ARG002", # Unused method argument
    "F841", # Unused variable
    "B007", # Unused loop control variable

    # Code complexity
    "PLR2004", # Magic value in comparison
    "PLR0913", # Too many arguments
    "PLR0206", # Property with parameters
    "SIM117", # Nested with statements

    # Private member access
    "SLF001", # Private member access

    # Exception handling
    "TRY301", # raise within try block
    "TRY003", # Long exception message
    "EM101", # String literal in exception
    "BLE001", # Blind except (catching Exception)

    # Import style
    "PLC0415", # Import outside top-level

    # Naming conventions
    "N801", # Invalid class name (non-CamelCase)

    # Type annotations
    "ANN001", # Missing type for function argument
    "ANN002", # Missing type for *args
    "ANN003", # Missing type for **kwargs
    "ANN202", # Missing return type for private function

    # Documentation
    "D", # All docstring rules

    "PLC2701",
]
"tmp/**" = [
    # All rules ignored in temporary files
    "ALL",
]
"docs/**" = [
    # All rules ignored in temporary files
    "ALL",
]

[lint.isort]
combine-as-imports = true
required-imports = ["from __future__ import annotations"]

[lint.flake8-tidy-imports]
ban-relative-imports = "all"

[lint.pylint]
max-positional-args = 2

[format]
preview = true
quote-style = "double"
indent-style = "space"
docstring-code-format = true

[lint.flake8-pytest-style]
fixture-parentheses = true
mark-parentheses = false
